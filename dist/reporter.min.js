var reporter=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n,r,o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function s(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */
function a(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(a(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */!function(t){t.Fatal="fatal",t.Error="error",t.Warning="warning",t.Log="log",t.Info="info",t.Debug="debug",t.Critical="critical"}(n||(n={})),function(t){t.fromString=function(e){switch(e){case"debug":return t.Debug;case"info":return t.Info;case"warn":case"warning":return t.Warning;case"error":return t.Error;case"fatal":return t.Fatal;case"critical":return t.Critical;case"log":default:return t.Log}}}(n||(n={})),function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.Invalid="invalid",t.Failed="failed"}(r||(r={})),function(t){t.fromHttpCode=function(e){return e>=200&&e<300?t.Success:429===e?t.RateLimit:e>=400&&e<500?t.Invalid:e>=500?t.Failed:t.Unknown}}(r||(r={}));var u=function(){return(u=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function l(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(l(arguments[e]));return t}
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var f=function(t,e){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};var d=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,e){return t.__proto__=e,t}:function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t});var v=function(t){function e(e){var n=this.constructor,r=t.call(this,e)||this;return r.message=e,r.name=n.prototype.constructor.name,d(r,n.prototype),r}return function(t,e){function n(){this.constructor=t}f(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);function _(t){switch(Object.prototype.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return k(t,Error)}}function y(t){return"[object ErrorEvent]"===Object.prototype.toString.call(t)}function g(t){return"[object DOMError]"===Object.prototype.toString.call(t)}function m(t){return"[object String]"===Object.prototype.toString.call(t)}function b(t){return null===t||"object"!=typeof t&&"function"!=typeof t}function E(t){return"[object Object]"===Object.prototype.toString.call(t)}function x(t){return"undefined"!=typeof Event&&k(t,Event)}function w(t){return"undefined"!=typeof Element&&k(t,Element)}function S(t){return Boolean(t&&t.then&&"function"==typeof t.then)}function k(t,e){try{return t instanceof e}catch(t){return!1}}function O(t,e){return void 0===e&&(e=0),"string"!=typeof t||0===e||t.length<=e?t:t.substr(0,e)+"..."}function T(t,e){if(!Array.isArray(t))return"";for(var n=[],r=0;r<t.length;r++){var o=t[r];try{n.push(String(o))}catch(t){n.push("[value cannot be serialized]")}}return n.join(e)}function j(t,e){return!!m(t)&&("[object RegExp]"===Object.prototype.toString.call(e)?e.test(t):"string"==typeof e&&-1!==t.indexOf(e))}function R(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}var I={};function U(){return R()?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:I}function N(){var t=U(),e=t.crypto||t.msCrypto;if(void 0!==e&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(t){for(var e=t.toString(16);e.length<4;)e="0"+e;return e};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}function P(t){if(!t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);return e?{host:e[4],path:e[5],protocol:e[2],relative:e[5]+(e[6]||"")+(e[8]||"")}:{}}function C(t){if(t.message)return t.message;if(t.exception&&t.exception.values&&t.exception.values[0]){var e=t.exception.values[0];return e.type&&e.value?e.type+": "+e.value:e.type||e.value||t.event_id||"<unknown>"}return t.event_id||"<unknown>"}function D(t){var e=U();if(!("console"in e))return t();var n=e.console,r={};["debug","info","warn","error","log","assert"].forEach((function(t){t in e.console&&n[t].__sentry_original__&&(r[t]=n[t],n[t]=n[t].__sentry_original__)}));var o=t();return Object.keys(r).forEach((function(t){n[t]=r[t]})),o}function L(t,e,n){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].value=t.exception.values[0].value||e||"",t.exception.values[0].type=t.exception.values[0].type||n||"Error"}function A(t,e){void 0===e&&(e={});try{t.exception.values[0].mechanism=t.exception.values[0].mechanism||{},Object.keys(e).forEach((function(n){t.exception.values[0].mechanism[n]=e[n]}))}catch(t){}}function F(t){try{for(var e=t,n=[],r=0,o=0,i=" > ".length,s=void 0;e&&r++<5&&!("html"===(s=H(e))||r>1&&o+n.length*i+s.length>=80);)n.push(s),o+=s.length,e=e.parentNode;return n.reverse().join(" > ")}catch(t){return"<unknown>"}}function H(t){var e,n,r,o,i,s=t,a=[];if(!s||!s.tagName)return"";if(a.push(s.tagName.toLowerCase()),s.id&&a.push("#"+s.id),(e=s.className)&&m(e))for(n=e.split(/\s+/),i=0;i<n.length;i++)a.push("."+n[i]);var c=["type","name","title","alt"];for(i=0;i<c.length;i++)(o=s.getAttribute(r=c[i]))&&a.push("["+r+'="'+o+'"]');return a.join("")}var B=Date.now(),M=0,q={now:function(){var t=Date.now()-B;return t<M&&(t=M),M=t,t},timeOrigin:B},Y=function(){if(R())try{return module.require("perf_hooks").performance}catch(t){return q}return U().performance&&void 0===performance.timeOrigin&&(performance.timeOrigin=performance.timing&&performance.timing.navigationStart||B),U().performance||q}();function W(){return(Y.timeOrigin+Y.now())/1e3}function G(t,e){if(!e)return 6e4;var n=parseInt(""+e,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+e);return isNaN(r)?6e4:r-t}var J="<anonymous>";function X(t){try{return t&&"function"==typeof t&&t.name||J}catch(t){return J}}var $=U(),z="Sentry Logger ",V=function(){function t(){this._enabled=!1}return t.prototype.disable=function(){this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&D((function(){$.console.log(z+"[Log]: "+t.join(" "))}))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&D((function(){$.console.warn(z+"[Warn]: "+t.join(" "))}))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._enabled&&D((function(){$.console.error(z+"[Error]: "+t.join(" "))}))},t}();$.__SENTRY__=$.__SENTRY__||{};var K,Q=$.__SENTRY__.logger||($.__SENTRY__.logger=new V),Z=function(){function t(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return t.prototype.memoize=function(t){if(this._hasWeakSet)return!!this._inner.has(t)||(this._inner.add(t),!1);for(var e=0;e<this._inner.length;e++){if(this._inner[e]===t)return!0}return this._inner.push(t),!1},t.prototype.unmemoize=function(t){if(this._hasWeakSet)this._inner.delete(t);else for(var e=0;e<this._inner.length;e++)if(this._inner[e]===t){this._inner.splice(e,1);break}},t}();function tt(t,e,n){if(e in t){var r=t[e],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(t){}t[e]=o}}function et(t){if(_(t)){var e=t,n={message:e.message,name:e.name,stack:e.stack};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}if(x(t)){var o=t,i={};i.type=o.type;try{i.target=w(o.target)?F(o.target):Object.prototype.toString.call(o.target)}catch(t){i.target="<unknown>"}try{i.currentTarget=w(o.currentTarget)?F(o.currentTarget):Object.prototype.toString.call(o.currentTarget)}catch(t){i.currentTarget="<unknown>"}for(var r in"undefined"!=typeof CustomEvent&&k(t,CustomEvent)&&(i.detail=o.detail),o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o);return i}return t}function nt(t){return function(t){return~-encodeURI(t).split(/%..|./).length}(JSON.stringify(t))}function rt(t,e,n){void 0===e&&(e=3),void 0===n&&(n=102400);var r=st(t,e);return nt(r)>n?rt(t,e-1,n):r}function ot(t,e){return"domain"===e&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===e?"[DomainEmitter]":"undefined"!=typeof global&&t===global?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":E(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+X(t)+"]":t;var n}function it(t,e,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new Z),0===n)return function(t){var e=Object.prototype.toString.call(t);if("string"==typeof t)return t;if("[object Object]"===e)return"[Object]";if("[object Array]"===e)return"[Array]";var n=ot(t);return b(n)?n:e}(e);if(null!=e&&"function"==typeof e.toJSON)return e.toJSON();var o=ot(e,t);if(b(o))return o;var i=et(e),s=Array.isArray(e)?[]:{};if(r.memoize(e))return"[Circular ~]";for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(s[a]=it(a,i[a],n-1,r));return r.unmemoize(e),s}function st(t,e){try{return JSON.parse(JSON.stringify(t,(function(t,n){return it(t,n,e)})))}catch(t){return"**non-serializable**"}}function at(t,e){void 0===e&&(e=40);var n=Object.keys(et(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return O(n[0],e);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>e))return r===n.length?o:O(o,e)}return""}!function(t){t.PENDING="PENDING",t.RESOLVED="RESOLVED",t.REJECTED="REJECTED"}(K||(K={}));var ct=function(){function t(t){var e=this;this._state=K.PENDING,this._handlers=[],this._resolve=function(t){e._setResult(K.RESOLVED,t)},this._reject=function(t){e._setResult(K.REJECTED,t)},this._setResult=function(t,n){e._state===K.PENDING&&(S(n)?n.then(e._resolve,e._reject):(e._state=t,e._value=n,e._executeHandlers()))},this._attachHandler=function(t){e._handlers=e._handlers.concat(t),e._executeHandlers()},this._executeHandlers=function(){if(e._state!==K.PENDING){var t=e._handlers.slice();e._handlers=[],t.forEach((function(t){t.done||(e._state===K.RESOLVED&&t.onfulfilled&&t.onfulfilled(e._value),e._state===K.REJECTED&&t.onrejected&&t.onrejected(e._value),t.done=!0)}))}};try{t(this._resolve,this._reject)}catch(t){this._reject(t)}}return t.prototype.toString=function(){return"[object SyncPromise]"},t.resolve=function(e){return new t((function(t){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.all=function(e){return new t((function(n,r){if(Array.isArray(e))if(0!==e.length){var o=e.length,i=[];e.forEach((function(e,s){t.resolve(e).then((function(t){i[s]=t,0===(o-=1)&&n(i)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},t.prototype.then=function(e,n){var r=this;return new t((function(t,o){r._attachHandler({done:!1,onfulfilled:function(n){if(e)try{return void t(e(n))}catch(t){return void o(t)}else t(n)},onrejected:function(e){if(n)try{return void t(n(e))}catch(t){return void o(t)}else o(e)}})}))},t.prototype.catch=function(t){return this.then((function(t){return t}),t)},t.prototype.finally=function(e){var n=this;return new t((function(t,r){var o,i;return n.then((function(t){i=!1,o=t,e&&e()}),(function(t){i=!0,o=t,e&&e()})).then((function(){i?r(o):t(o)}))}))},t}(),ut=function(){function t(t){this._limit=t,this._buffer=[]}return t.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},t.prototype.add=function(t){var e=this;return this.isReady()?(-1===this._buffer.indexOf(t)&&this._buffer.push(t),t.then((function(){return e.remove(t)})).then(null,(function(){return e.remove(t).then(null,(function(){}))})),t):ct.reject(new v("Not adding Promise due to buffer limit reached."))},t.prototype.remove=function(t){return this._buffer.splice(this._buffer.indexOf(t),1)[0]},t.prototype.length=function(){return this._buffer.length},t.prototype.drain=function(t){var e=this;return new ct((function(n){var r=setTimeout((function(){t&&t>0&&n(!1)}),t);ct.all(e._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},t}();function lt(){if(!("fetch"in U()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}}function pt(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function ft(){if(!lt())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(t){return!1}}var ht,dt=U(),vt={},_t={};function yt(t){if(!_t[t])switch(_t[t]=!0,t){case"console":!function(){if(!("console"in dt))return;["debug","info","warn","error","log","assert"].forEach((function(t){t in dt.console&&tt(dt.console,t,(function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];mt("console",{args:n,level:t}),e&&Function.prototype.apply.call(e,dt.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in dt))return;dt.document.addEventListener("click",kt("click",mt.bind(null,"dom")),!1),dt.document.addEventListener("keypress",Ot(mt.bind(null,"dom")),!1),["EventTarget","Node"].forEach((function(t){var e=dt[t]&&dt[t].prototype;e&&e.hasOwnProperty&&e.hasOwnProperty("addEventListener")&&(tt(e,"addEventListener",(function(t){return function(e,n,r){return n&&n.handleEvent?("click"===e&&tt(n,"handleEvent",(function(t){return function(e){return kt("click",mt.bind(null,"dom"))(e),t.call(this,e)}})),"keypress"===e&&tt(n,"handleEvent",(function(t){return function(e){return Ot(mt.bind(null,"dom"))(e),t.call(this,e)}}))):("click"===e&&kt("click",mt.bind(null,"dom"),!0)(this),"keypress"===e&&Ot(mt.bind(null,"dom"))(this)),t.call(this,e,n,r)}})),tt(e,"removeEventListener",(function(t){return function(e,n,r){var o=n;try{o=o&&(o.__sentry_wrapped__||o)}catch(t){}return t.call(this,e,o,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in dt))return;var t=XMLHttpRequest.prototype;tt(t,"open",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[1];return this.__sentry_xhr__={method:m(e[0])?e[0].toUpperCase():e[0],url:e[1]},m(r)&&"POST"===this.__sentry_xhr__.method&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0),t.apply(this,e)}})),tt(t,"send",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o={args:e,startTimestamp:Date.now(),xhr:r};return mt("xhr",h({},o)),r.addEventListener("readystatechange",(function(){if(4===r.readyState){try{r.__sentry_xhr__&&(r.__sentry_xhr__.status_code=r.status)}catch(t){}mt("xhr",h({},o,{endTimestamp:Date.now()}))}})),t.apply(this,e)}}))}();break;case"fetch":!function(){if(!function(){if(!lt())return!1;var t=U();if(pt(t.fetch))return!0;var e=!1,n=t.document;if(n&&"function"==typeof n.createElement)try{var r=n.createElement("iframe");r.hidden=!0,n.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=pt(r.contentWindow.fetch)),n.head.removeChild(r)}catch(t){Q.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",t)}return e}())return;tt(dt,"fetch",(function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r={args:e,fetchData:{method:bt(e),url:Et(e)},startTimestamp:Date.now()};return mt("fetch",h({},r)),t.apply(dt,e).then((function(t){return mt("fetch",h({},r,{endTimestamp:Date.now(),response:t})),t}),(function(t){throw mt("fetch",h({},r,{endTimestamp:Date.now(),error:t})),t}))}}))}();break;case"history":!function(){if(!function(){var t=U(),e=t.chrome;return!(e&&e.app&&e.app.runtime||!("history"in t)||!t.history.pushState||!t.history.replaceState)}())return;var t=dt.onpopstate;function e(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e.length>2?e[2]:void 0;if(r){var o=ht,i=String(r);ht=i,mt("history",{from:o,to:i})}return t.apply(this,e)}}dt.onpopstate=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=dt.location.href,o=ht;if(ht=r,mt("history",{from:o,to:r}),t)return t.apply(this,e)},tt(dt.history,"pushState",e),tt(dt.history,"replaceState",e)}();break;case"error":Tt=dt.onerror,dt.onerror=function(t,e,n,r,o){return mt("error",{column:r,error:o,line:n,msg:t,url:e}),!!Tt&&Tt.apply(this,arguments)};break;case"unhandledrejection":jt=dt.onunhandledrejection,dt.onunhandledrejection=function(t){return mt("unhandledrejection",t),!jt||jt.apply(this,arguments)};break;default:Q.warn("unknown instrumentation type:",t)}}function gt(t){t&&"string"==typeof t.type&&"function"==typeof t.callback&&(vt[t.type]=vt[t.type]||[],vt[t.type].push(t.callback),yt(t.type))}function mt(t,e){var n,r;if(t&&vt[t])try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(vt[t]||[]),i=o.next();!i.done;i=o.next()){var s=i.value;try{s(e)}catch(e){Q.error("Error while triggering instrumentation handler.\nType: "+t+"\nName: "+X(s)+"\nError: "+e)}}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}function bt(t){return void 0===t&&(t=[]),"Request"in dt&&k(t[0],Request)&&t[0].method?String(t[0].method).toUpperCase():t[1]&&t[1].method?String(t[1].method).toUpperCase():"GET"}function Et(t){return void 0===t&&(t=[]),"string"==typeof t[0]?t[0]:"Request"in dt&&k(t[0],Request)?t[0].url:String(t[0])}var xt,wt,St=0;function kt(t,e,n){return void 0===n&&(n=!1),function(r){xt=void 0,r&&wt!==r&&(wt=r,St&&clearTimeout(St),n?St=setTimeout((function(){e({event:r,name:t})})):e({event:r,name:t}))}}function Ot(t){return function(e){var n;try{n=e.target}catch(t){return}var r=n&&n.tagName;r&&("INPUT"===r||"TEXTAREA"===r||n.isContentEditable)&&(xt||kt("input",t)(e),clearTimeout(xt),xt=setTimeout((function(){xt=void 0}),1e3))}}var Tt=null;var jt=null;var Rt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w\.-]+)(?::(\d+))?\/(.+)/,It="Invalid Dsn",Ut=function(){function t(t){"string"==typeof t?this._fromString(t):this._fromComponents(t),this._validate()}return t.prototype.toString=function(t){void 0===t&&(t=!1);var e=this,n=e.path,r=e.pass,o=e.port;return e.protocol+"://"+e.user+(t&&r?":"+r:"")+"@"+e.host+(o?":"+o:"")+"/"+(n?n+"/":n)+e.projectId},t.prototype._fromString=function(t){var e=Rt.exec(t);if(!e)throw new v(It);var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}(e.slice(1),6),r=n[0],o=n[1],i=n[2],s=void 0===i?"":i,a=n[3],c=n[4],u=void 0===c?"":c,l="",p=n[5],f=p.split("/");f.length>1&&(l=f.slice(0,-1).join("/"),p=f.pop()),this._fromComponents({host:a,pass:s,path:l,projectId:p,port:u,protocol:r,user:o})},t.prototype._fromComponents=function(t){this.protocol=t.protocol,this.user=t.user,this.pass=t.pass||"",this.host=t.host,this.port=t.port||"",this.path=t.path||"",this.projectId=t.projectId},t.prototype._validate=function(){var t=this;if(["protocol","user","host","projectId"].forEach((function(e){if(!t[e])throw new v(It)})),"http"!==this.protocol&&"https"!==this.protocol)throw new v(It);if(this.port&&isNaN(parseInt(this.port,10)))throw new v(It)},t}(),Nt=function(){function t(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._context={}}return t.prototype.addScopeListener=function(t){this._scopeListeners.push(t)},t.prototype.addEventProcessor=function(t){return this._eventProcessors.push(t),this},t.prototype._notifyScopeListeners=function(){var t=this;this._notifyingListeners||(this._notifyingListeners=!0,setTimeout((function(){t._scopeListeners.forEach((function(e){e(t)})),t._notifyingListeners=!1})))},t.prototype._notifyEventProcessors=function(t,e,n,r){var o=this;return void 0===r&&(r=0),new ct((function(i,s){var a=t[r];if(null===e||"function"!=typeof a)i(e);else{var c=a(u({},e),n);S(c)?c.then((function(e){return o._notifyEventProcessors(t,e,n,r+1).then(i)})).then(null,s):o._notifyEventProcessors(t,c,n,r+1).then(i).then(null,s)}}))},t.prototype.setUser=function(t){return this._user=t||{},this._notifyScopeListeners(),this},t.prototype.setTags=function(t){return this._tags=u({},this._tags,t),this._notifyScopeListeners(),this},t.prototype.setTag=function(t,e){var n;return this._tags=u({},this._tags,((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setExtras=function(t){return this._extra=u({},this._extra,t),this._notifyScopeListeners(),this},t.prototype.setExtra=function(t,e){var n;return this._extra=u({},this._extra,((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setFingerprint=function(t){return this._fingerprint=t,this._notifyScopeListeners(),this},t.prototype.setLevel=function(t){return this._level=t,this._notifyScopeListeners(),this},t.prototype.setTransaction=function(t){return this._transaction=t,this._span&&(this._span.transaction=t),this._notifyScopeListeners(),this},t.prototype.setContext=function(t,e){var n;return this._context=u({},this._context,((n={})[t]=e,n)),this._notifyScopeListeners(),this},t.prototype.setSpan=function(t){return this._span=t,this._notifyScopeListeners(),this},t.prototype.getSpan=function(){return this._span},t.clone=function(e){var n=new t;return e&&(n._breadcrumbs=p(e._breadcrumbs),n._tags=u({},e._tags),n._extra=u({},e._extra),n._context=u({},e._context),n._user=e._user,n._level=e._level,n._span=e._span,n._transaction=e._transaction,n._fingerprint=e._fingerprint,n._eventProcessors=p(e._eventProcessors)),n},t.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._context={},this._level=void 0,this._transaction=void 0,this._fingerprint=void 0,this._span=void 0,this._notifyScopeListeners(),this},t.prototype.addBreadcrumb=function(t,e){var n=u({timestamp:W()},t);return this._breadcrumbs=void 0!==e&&e>=0?p(this._breadcrumbs,[n]).slice(-e):p(this._breadcrumbs,[n]),this._notifyScopeListeners(),this},t.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},t.prototype._applyFingerprint=function(t){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],this._fingerprint&&(t.fingerprint=t.fingerprint.concat(this._fingerprint)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint},t.prototype.applyToEvent=function(t,e){return this._extra&&Object.keys(this._extra).length&&(t.extra=u({},this._extra,t.extra)),this._tags&&Object.keys(this._tags).length&&(t.tags=u({},this._tags,t.tags)),this._user&&Object.keys(this._user).length&&(t.user=u({},this._user,t.user)),this._context&&Object.keys(this._context).length&&(t.contexts=u({},this._context,t.contexts)),this._level&&(t.level=this._level),this._transaction&&(t.transaction=this._transaction),this._span&&(t.contexts=u({trace:this._span.getTraceContext()},t.contexts)),this._applyFingerprint(t),t.breadcrumbs=p(t.breadcrumbs||[],this._breadcrumbs),t.breadcrumbs=t.breadcrumbs.length>0?t.breadcrumbs:void 0,this._notifyEventProcessors(p(Pt(),this._eventProcessors),t,e)},t}();function Pt(){var t=U();return t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.globalEventProcessors=t.__SENTRY__.globalEventProcessors||[],t.__SENTRY__.globalEventProcessors}function Ct(t){Pt().push(t)}var Dt=function(){function t(t,e,n){void 0===e&&(e=new Nt),void 0===n&&(n=3),this._version=n,this._stack=[],this._stack.push({client:t,scope:e})}return t.prototype._invokeClient=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=this.getStackTop();o&&o.client&&o.client[t]&&(e=o.client)[t].apply(e,p(n,[o.scope]))},t.prototype.isOlderThan=function(t){return this._version<t},t.prototype.bindClient=function(t){this.getStackTop().client=t,t&&t.setupIntegrations&&t.setupIntegrations()},t.prototype.pushScope=function(){var t=this.getStack(),e=Nt.clone(t.length>0?t[t.length-1].scope:void 0);return this.getStack().push({client:this.getClient(),scope:e}),e},t.prototype.popScope=function(){return void 0!==this.getStack().pop()},t.prototype.withScope=function(t){var e=this.pushScope();try{t(e)}finally{this.popScope()}},t.prototype.getClient=function(){return this.getStackTop().client},t.prototype.getScope=function(){return this.getStackTop().scope},t.prototype.getStack=function(){return this._stack},t.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},t.prototype.captureException=function(t,e){var n=this._lastEventId=N(),r=e;if(!e){var o=void 0;try{throw new Error("Sentry syntheticException")}catch(t){o=t}r={originalException:t,syntheticException:o}}return this._invokeClient("captureException",t,u({},r,{event_id:n})),n},t.prototype.captureMessage=function(t,e,n){var r=this._lastEventId=N(),o=n;if(!n){var i=void 0;try{throw new Error(t)}catch(t){i=t}o={originalException:t,syntheticException:i}}return this._invokeClient("captureMessage",t,e,u({},o,{event_id:r})),r},t.prototype.captureEvent=function(t,e){var n=this._lastEventId=N();return this._invokeClient("captureEvent",t,u({},e,{event_id:n})),n},t.prototype.lastEventId=function(){return this._lastEventId},t.prototype.addBreadcrumb=function(t,e){var n=this.getStackTop();if(n.scope&&n.client){var r=n.client.getOptions&&n.client.getOptions()||{},o=r.beforeBreadcrumb,i=void 0===o?null:o,s=r.maxBreadcrumbs,a=void 0===s?100:s;if(!(a<=0)){var c=W(),l=u({timestamp:c},t),p=i?D((function(){return i(l,e)})):l;null!==p&&n.scope.addBreadcrumb(p,Math.min(a,100))}}},t.prototype.setUser=function(t){var e=this.getStackTop();e.scope&&e.scope.setUser(t)},t.prototype.setTags=function(t){var e=this.getStackTop();e.scope&&e.scope.setTags(t)},t.prototype.setExtras=function(t){var e=this.getStackTop();e.scope&&e.scope.setExtras(t)},t.prototype.setTag=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setTag(t,e)},t.prototype.setExtra=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setExtra(t,e)},t.prototype.setContext=function(t,e){var n=this.getStackTop();n.scope&&n.scope.setContext(t,e)},t.prototype.configureScope=function(t){var e=this.getStackTop();e.scope&&e.client&&t(e.scope)},t.prototype.run=function(t){var e=At(this);try{t(this)}finally{At(e)}},t.prototype.getIntegration=function(t){var e=this.getClient();if(!e)return null;try{return e.getIntegration(t)}catch(e){return Q.warn("Cannot retrieve integration "+t.id+" from the current Hub"),null}},t.prototype.startSpan=function(t,e){return void 0===e&&(e=!1),this._callExtensionMethod("startSpan",t,e)},t.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},t.prototype._callExtensionMethod=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Lt(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[t])return o.extensions[t].apply(this,e);Q.warn("Extension method "+t+" couldn't be found, doing nothing.")},t}();function Lt(){var t=U();return t.__SENTRY__=t.__SENTRY__||{extensions:{},hub:void 0},t}function At(t){var e=Lt(),n=Bt(e);return Mt(e,t),n}function Ft(){var t=Lt();return Ht(t)&&!Bt(t).isOlderThan(3)||Mt(t,new Dt),R()?function(t){try{var e="domain",n=Lt().__SENTRY__;if(!n||!n.extensions||!n.extensions[e])return Bt(t);var r=n.extensions[e].active;if(!r)return Bt(t);if(!Ht(r)||Bt(r).isOlderThan(3)){var o=Bt(t).getStackTop();Mt(r,new Dt(o.client,Nt.clone(o.scope)))}return Bt(r)}catch(e){return Bt(t)}}(t):Bt(t)}function Ht(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function Bt(t){return t&&t.__SENTRY__&&t.__SENTRY__.hub||(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=new Dt),t.__SENTRY__.hub}function Mt(t,e){return!!t&&(t.__SENTRY__=t.__SENTRY__||{},t.__SENTRY__.hub=e,!0)}function qt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Ft();if(r&&r[t])return r[t].apply(r,c(e));throw new Error("No hub defined or "+t+" was not found on the hub, please open a bug report.")}function Yt(t){var e;try{throw new Error("Sentry syntheticException")}catch(t){e=t}return qt("captureException",t,{originalException:t,syntheticException:e})}function Wt(t,e){var n;try{throw new Error(t)}catch(t){n=t}return qt("captureMessage",t,e,{originalException:t,syntheticException:n})}function Gt(t){qt("configureScope",t)}function Jt(t,e){qt("setExtra",t,e)}function Xt(t,e){qt("setTag",t,e)}function $t(t){qt("setUser",t)}function zt(t){qt("withScope",t)}var Vt=function(){function t(t){this.dsn=t,this._dsnObject=new Ut(t)}return t.prototype.getDsn=function(){return this._dsnObject},t.prototype.getStoreEndpoint=function(){return""+this._getBaseUrl()+this.getStoreEndpointPath()},t.prototype.getStoreEndpointWithUrlEncodedAuth=function(){var t,e={sentry_key:this._dsnObject.user,sentry_version:"7"};return this.getStoreEndpoint()+"?"+(t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"))},t.prototype._getBaseUrl=function(){var t=this._dsnObject;return(t.protocol?t.protocol+":":"")+"//"+t.host+(t.port?":"+t.port:"")},t.prototype.getStoreEndpointPath=function(){var t=this._dsnObject;return(t.path?"/"+t.path:"")+"/api/"+t.projectId+"/store/"},t.prototype.getRequestHeaders=function(t,e){var n=this._dsnObject,r=["Sentry sentry_version=7"];return r.push("sentry_client="+t+"/"+e),r.push("sentry_key="+n.user),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},t.prototype.getReportDialogEndpoint=function(t){void 0===t&&(t={});var e=this._dsnObject,n=this._getBaseUrl()+(e.path?"/"+e.path:"")+"/api/embed/error-page/",r=[];for(var o in r.push("dsn="+e.toString()),t)if("user"===o){if(!t.user)continue;t.user.name&&r.push("name="+encodeURIComponent(t.user.name)),t.user.email&&r.push("email="+encodeURIComponent(t.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r.length?n+"?"+r.join("&"):n},t}(),Kt=function(){return(Kt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function Qt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Zt(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Qt(arguments[e]));return t}var te=[];function ee(t){var e={};return function(t){var e=t.defaultIntegrations&&Zt(t.defaultIntegrations)||[],n=t.integrations,r=[];if(Array.isArray(n)){var o=n.map((function(t){return t.name})),i=[];e.forEach((function(t){-1===o.indexOf(t.name)&&-1===i.indexOf(t.name)&&(r.push(t),i.push(t.name))})),n.forEach((function(t){-1===i.indexOf(t.name)&&(r.push(t),i.push(t.name))}))}else"function"==typeof n?(r=n(e),r=Array.isArray(r)?r:[r]):r=Zt(e);var s=r.map((function(t){return t.name})),a="Debug";return-1!==s.indexOf(a)&&r.push.apply(r,Zt(r.splice(s.indexOf(a),1))),r}(t).forEach((function(t){e[t.name]=t,function(t){-1===te.indexOf(t.name)&&(t.setupOnce(Ct,Ft),te.push(t.name),Q.log("Integration installed: "+t.name))}(t)})),e}var ne,re=function(){function t(t,e){this._integrations={},this._processing=!1,this._backend=new t(e),this._options=e,e.dsn&&(this._dsn=new Ut(e.dsn))}return t.prototype.captureException=function(t,e,n){var r=this,o=e&&e.event_id;return this._processing=!0,this._getBackend().eventFromException(t,e).then((function(t){return r._processEvent(t,e,n)})).then((function(t){o=t&&t.event_id,r._processing=!1})).then(null,(function(t){Q.error(t),r._processing=!1})),o},t.prototype.captureMessage=function(t,e,n,r){var o=this,i=n&&n.event_id;return this._processing=!0,(b(t)?this._getBackend().eventFromMessage(""+t,e,n):this._getBackend().eventFromException(t,n)).then((function(t){return o._processEvent(t,n,r)})).then((function(t){i=t&&t.event_id,o._processing=!1})).then(null,(function(t){Q.error(t),o._processing=!1})),i},t.prototype.captureEvent=function(t,e,n){var r=this,o=e&&e.event_id;return this._processing=!0,this._processEvent(t,e,n).then((function(t){o=t&&t.event_id,r._processing=!1})).then(null,(function(t){Q.error(t),r._processing=!1})),o},t.prototype.getDsn=function(){return this._dsn},t.prototype.getOptions=function(){return this._options},t.prototype.flush=function(t){var e=this;return this._isClientProcessing(t).then((function(n){return clearInterval(n.interval),e._getBackend().getTransport().close(t).then((function(t){return n.ready&&t}))}))},t.prototype.close=function(t){var e=this;return this.flush(t).then((function(t){return e.getOptions().enabled=!1,t}))},t.prototype.setupIntegrations=function(){this._isEnabled()&&(this._integrations=ee(this._options))},t.prototype.getIntegration=function(t){try{return this._integrations[t.id]||null}catch(e){return Q.warn("Cannot retrieve integration "+t.id+" from the current Client"),null}},t.prototype._isClientProcessing=function(t){var e=this;return new ct((function(n){var r=0,o=0;clearInterval(o),o=setInterval((function(){e._processing?(r+=1,t&&r>=t&&n({interval:o,ready:!1})):n({interval:o,ready:!0})}),1)}))},t.prototype._getBackend=function(){return this._backend},t.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},t.prototype._prepareEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.environment,s=o.release,a=o.dist,c=o.maxValueLength,u=void 0===c?250:c,l=o.normalizeDepth,p=void 0===l?3:l,f=Kt({},t);void 0===f.environment&&void 0!==i&&(f.environment=i),void 0===f.release&&void 0!==s&&(f.release=s),void 0===f.dist&&void 0!==a&&(f.dist=a),f.message&&(f.message=O(f.message,u));var h=f.exception&&f.exception.values&&f.exception.values[0];h&&h.value&&(h.value=O(h.value,u));var d=f.request;d&&d.url&&(d.url=O(d.url,u)),void 0===f.event_id&&(f.event_id=n&&n.event_id?n.event_id:N()),this._addIntegrations(f.sdk);var v=ct.resolve(f);return e&&(v=e.applyToEvent(f,n)),v.then((function(t){return"number"==typeof p&&p>0?r._normalizeEvent(t,p):t}))},t.prototype._normalizeEvent=function(t,e){return t?Kt({},t,t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map((function(t){return Kt({},t,t.data&&{data:st(t.data,e)})}))},t.user&&{user:st(t.user,e)},t.contexts&&{contexts:st(t.contexts,e)},t.extra&&{extra:st(t.extra,e)}):null},t.prototype._addIntegrations=function(t){var e=Object.keys(this._integrations);t&&e.length>0&&(t.integrations=e)},t.prototype._processEvent=function(t,e,n){var r=this,o=this.getOptions(),i=o.beforeSend,s=o.sampleRate;return this._isEnabled()?"number"==typeof s&&Math.random()>s?ct.reject("This event has been sampled, will not send event."):new ct((function(o,s){r._prepareEvent(t,n,e).then((function(t){if(null!==t){var n=t;if(e&&e.data&&!0===e.data.__sentry__||!i)return r._getBackend().sendEvent(n),void o(n);var a=i(t,e);if(void 0===a)Q.error("`beforeSend` method has to return `null` or a valid event.");else if(S(a))r._handleAsyncBeforeSend(a,o,s);else{if(null===(n=a))return Q.log("`beforeSend` returned `null`, will not send event."),void o(null);r._getBackend().sendEvent(n),o(n)}}else s("An event processor returned null, will not send event.")})).then(null,(function(t){r.captureException(t,{data:{__sentry__:!0},originalException:t}),s("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+t)}))})):ct.reject("SDK not enabled, will not send event.")},t.prototype._handleAsyncBeforeSend=function(t,e,n){var r=this;t.then((function(t){null!==t?(r._getBackend().sendEvent(t),e(t)):n("`beforeSend` returned `null`, will not send event.")})).then(null,(function(t){n("beforeSend rejected with "+t)}))},t}(),oe=function(){function t(){}return t.prototype.sendEvent=function(t){return ct.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:r.Skipped})},t.prototype.close=function(t){return ct.resolve(!0)},t}(),ie=function(){function t(t){this._options=t,this._options.dsn||Q.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return t.prototype._setupTransport=function(){return new oe},t.prototype.eventFromException=function(t,e){throw new v("Backend has to implement `eventFromException` method")},t.prototype.eventFromMessage=function(t,e,n){throw new v("Backend has to implement `eventFromMessage` method")},t.prototype.sendEvent=function(t){this._transport.sendEvent(t).then(null,(function(t){Q.error("Error while sending event: "+t)}))},t.prototype.getTransport=function(){return this._transport},t}();var se=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){ne=Function.prototype.toString,Function.prototype.toString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.__sentry_original__||this;return ne.apply(n,t)}},t.id="FunctionToString",t}(),ae=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ce=function(){function t(e){void 0===e&&(e={}),this._options=e,this.name=t.id}return t.prototype.setupOnce=function(){Ct((function(e){var n=Ft();if(!n)return e;var r=n.getIntegration(t);if(r){var o=n.getClient(),i=o?o.getOptions():{},s=r._mergeOptions(i);if(r._shouldDropEvent(e,s))return null}return e}))},t.prototype._shouldDropEvent=function(t,e){return this._isSentryError(t,e)?(Q.warn("Event dropped due to being internal Sentry Error.\nEvent: "+C(t)),!0):this._isIgnoredError(t,e)?(Q.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+C(t)),!0):this._isBlacklistedUrl(t,e)?(Q.warn("Event dropped due to being matched by `blacklistUrls` option.\nEvent: "+C(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0):!this._isWhitelistedUrl(t,e)&&(Q.warn("Event dropped due to not being matched by `whitelistUrls` option.\nEvent: "+C(t)+".\nUrl: "+this._getEventFilterUrl(t)),!0)},t.prototype._isSentryError=function(t,e){if(void 0===e&&(e={}),!e.ignoreInternal)return!1;try{return t&&t.exception&&t.exception.values&&t.exception.values[0]&&"SentryError"===t.exception.values[0].type||!1}catch(t){return!1}},t.prototype._isIgnoredError=function(t,e){return void 0===e&&(e={}),!(!e.ignoreErrors||!e.ignoreErrors.length)&&this._getPossibleEventMessages(t).some((function(t){return e.ignoreErrors.some((function(e){return j(t,e)}))}))},t.prototype._isBlacklistedUrl=function(t,e){if(void 0===e&&(e={}),!e.blacklistUrls||!e.blacklistUrls.length)return!1;var n=this._getEventFilterUrl(t);return!!n&&e.blacklistUrls.some((function(t){return j(n,t)}))},t.prototype._isWhitelistedUrl=function(t,e){if(void 0===e&&(e={}),!e.whitelistUrls||!e.whitelistUrls.length)return!0;var n=this._getEventFilterUrl(t);return!n||e.whitelistUrls.some((function(t){return j(n,t)}))},t.prototype._mergeOptions=function(t){return void 0===t&&(t={}),{blacklistUrls:Zt(this._options.blacklistUrls||[],t.blacklistUrls||[]),ignoreErrors:Zt(this._options.ignoreErrors||[],t.ignoreErrors||[],ae),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal,whitelistUrls:Zt(this._options.whitelistUrls||[],t.whitelistUrls||[])}},t.prototype._getPossibleEventMessages=function(t){if(t.message)return[t.message];if(t.exception)try{var e=t.exception.values&&t.exception.values[0]||{},n=e.type,r=e.value,o=void 0===r?"":r;return[""+o,(void 0===n?"":n)+": "+o]}catch(e){return Q.error("Cannot extract message for event "+C(t)),[]}return[]},t.prototype._getEventFilterUrl=function(t){try{if(t.stacktrace){var e=t.stacktrace.frames;return e&&e[e.length-1].filename||null}if(t.exception){var n=t.exception.values&&t.exception.values[0].stacktrace&&t.exception.values[0].stacktrace.frames;return n&&n[n.length-1].filename||null}return null}catch(e){return Q.error("Cannot extract url for event "+C(t)),null}},t.id="InboundFilters",t}(),ue="?",le=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,pe=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js))(?::(\d+))?(?::(\d+))?\s*$/i,fe=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,he=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,de=/\((\S*)(?::(\d+))(?::(\d+))\)/;function ve(t){var e=null,n=t&&t.framesToPop;try{if(e=function(t){if(!t||!t.stacktrace)return null;for(var e,n=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,r=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,o=t.stacktrace.split("\n"),i=[],s=0;s<o.length;s+=2){var a=null;(e=n.exec(o[s]))?a={url:e[2],func:e[3],args:[],line:+e[1],column:null}:(e=r.exec(o[s]))&&(a={url:e[6],func:e[3]||e[4],args:e[5]?e[5].split(","):[],line:+e[1],column:+e[2]}),a&&(!a.func&&a.line&&(a.func=ue),i.push(a))}if(!i.length)return null;return{message:ye(t),name:t.name,stack:i}}(t))return _e(e,n)}catch(t){}try{if(e=function(t){if(!t||!t.stack)return null;for(var e,n,r,o=[],i=t.stack.split("\n"),s=0;s<i.length;++s){if(n=le.exec(i[s])){var a=n[2]&&0===n[2].indexOf("native");n[2]&&0===n[2].indexOf("eval")&&(e=de.exec(n[2]))&&(n[2]=e[1],n[3]=e[2],n[4]=e[3]),r={url:n[2]&&0===n[2].indexOf("address at ")?n[2].substr("address at ".length):n[2],func:n[1]||ue,args:a?[n[2]]:[],line:n[3]?+n[3]:null,column:n[4]?+n[4]:null}}else if(n=fe.exec(i[s]))r={url:n[2],func:n[1]||ue,args:[],line:+n[3],column:n[4]?+n[4]:null};else{if(!(n=pe.exec(i[s])))continue;n[3]&&n[3].indexOf(" > eval")>-1&&(e=he.exec(n[3]))?(n[1]=n[1]||"eval",n[3]=e[1],n[4]=e[2],n[5]=""):0!==s||n[5]||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),r={url:n[3],func:n[1]||ue,args:n[2]?n[2].split(","):[],line:n[4]?+n[4]:null,column:n[5]?+n[5]:null}}!r.func&&r.line&&(r.func=ue),o.push(r)}if(!o.length)return null;return{message:ye(t),name:t.name,stack:o}}(t))return _e(e,n)}catch(t){}return{message:ye(t),name:t&&t.name,stack:[],failed:!0}}function _e(t,e){try{return o({},t,{stack:t.stack.slice(e)})}catch(e){return t}}function ye(t){var e=t&&t.message;return e?e.error&&"string"==typeof e.error.message?e.error.message:e:"No error message"}function ge(t){var e=be(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function me(t){return{exception:{values:[ge(t)]}}}function be(t){if(!t||!t.length)return[];var e=t,n=e[0].func||"",r=e[e.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(e=e.slice(1)),-1!==r.indexOf("sentryWrapped")&&(e=e.slice(0,-1)),e.map((function(t){return{colno:null===t.column?void 0:t.column,filename:t.url||e[0].url,function:t.func||"?",in_app:!0,lineno:null===t.line?void 0:t.line}})).slice(0,50).reverse()}function Ee(t,e,n){var r;if(void 0===n&&(n={}),y(t)&&t.error)return r=me(ve(t=t.error));if(g(t)||"[object DOMException]"===Object.prototype.toString.call(t)){var o=t,i=o.name||(g(o)?"DOMError":"DOMException"),s=o.message?i+": "+o.message:i;return L(r=xe(s,e,n),s),r}return _(t)?r=me(ve(t)):E(t)||x(t)?(A(r=function(t,e,n){var r={exception:{values:[{type:x(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+at(t)}]},extra:{__serialized__:rt(t)}};if(e){var o=be(ve(e).stack);r.stacktrace={frames:o}}return r}(t,e,n.rejection),{synthetic:!0}),r):(L(r=xe(t,e,n),""+t,void 0),A(r,{synthetic:!0}),r)}function xe(t,e,n){void 0===n&&(n={});var r={message:t};if(n.attachStacktrace&&e){var o=be(ve(e).stack);r.stacktrace={frames:o}}return r}var we=function(){function t(t){this.options=t,this._buffer=new ut(30),this.url=new Vt(this.options.dsn).getStoreEndpointWithUrlEncodedAuth()}return t.prototype.sendEvent=function(t){throw new v("Transport Class has to implement `sendEvent` method")},t.prototype.close=function(t){return this._buffer.drain(t)},t}(),Se=U(),ke=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}return e(n,t),n.prototype.sendEvent=function(t){var e=this;if(new Date(Date.now())<this._disabledUntil)return Promise.reject({event:t,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429});var n={body:JSON.stringify(t),method:"POST",referrerPolicy:ft()?"origin":""};return void 0!==this.options.headers&&(n.headers=this.options.headers),this._buffer.add(new ct((function(t,o){Se.fetch(e.url,n).then((function(n){var i=r.fromHttpCode(n.status);if(i!==r.Success){if(i===r.RateLimit){var s=Date.now();e._disabledUntil=new Date(s+G(s,n.headers.get("Retry-After"))),Q.warn("Too many requests, backing off till: "+e._disabledUntil)}o(n)}else t({status:i})})).catch(o)})))},n}(we),Oe=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e._disabledUntil=new Date(Date.now()),e}return e(n,t),n.prototype.sendEvent=function(t){var e=this;return new Date(Date.now())<this._disabledUntil?Promise.reject({event:t,reason:"Transport locked till "+this._disabledUntil+" due to too many requests.",status:429}):this._buffer.add(new ct((function(n,o){var i=new XMLHttpRequest;for(var s in i.onreadystatechange=function(){if(4===i.readyState){var t=r.fromHttpCode(i.status);if(t!==r.Success){if(t===r.RateLimit){var s=Date.now();e._disabledUntil=new Date(s+G(s,i.getResponseHeader("Retry-After"))),Q.warn("Too many requests, backing off till: "+e._disabledUntil)}o(i)}else n({status:t})}},i.open("POST",e.url),e.options.headers)e.options.headers.hasOwnProperty(s)&&i.setRequestHeader(s,e.options.headers[s]);i.send(JSON.stringify(t))})))},n}(we),Te=function(t){function r(){return null!==t&&t.apply(this,arguments)||this}return e(r,t),r.prototype._setupTransport=function(){if(!this._options.dsn)return t.prototype._setupTransport.call(this);var e=o({},this._options.transportOptions,{dsn:this._options.dsn});return this._options.transport?new this._options.transport(e):lt()?new ke(e):new Oe(e)},r.prototype.eventFromException=function(t,e){var r=Ee(t,e&&e.syntheticException||void 0,{attachStacktrace:this._options.attachStacktrace});return A(r,{handled:!0,type:"generic"}),r.level=n.Error,e&&e.event_id&&(r.event_id=e.event_id),ct.resolve(r)},r.prototype.eventFromMessage=function(t,e,r){void 0===e&&(e=n.Info);var o=xe(t,r&&r.syntheticException||void 0,{attachStacktrace:this._options.attachStacktrace});return o.level=e,r&&r.event_id&&(o.event_id=r.event_id),ct.resolve(o)},r}(ie),je="5.15.5",Re=function(t){function n(e){return void 0===e&&(e={}),t.call(this,Te,e)||this}return e(n,t),n.prototype._prepareEvent=function(e,n,r){return e.platform=e.platform||"javascript",e.sdk=o({},e.sdk,{name:"sentry.javascript.browser",packages:s(e.sdk&&e.sdk.packages||[],[{name:"npm:@sentry/browser",version:je}]),version:je}),t.prototype._prepareEvent.call(this,e,n,r)},n.prototype.showReportDialog=function(t){void 0===t&&(t={});var e=U().document;if(e)if(this._isEnabled()){var n=t.dsn||this.getDsn();if(t.eventId)if(n){var r=e.createElement("script");r.async=!0,r.src=new Vt(n).getReportDialogEndpoint(t),t.onLoad&&(r.onload=t.onLoad),(e.head||e.body).appendChild(r)}else Q.error("Missing `Dsn` option in showReportDialog call");else Q.error("Missing `eventId` option in showReportDialog call")}else Q.error("Trying to call showReportDialog with Sentry Client is disabled")},n}(re),Ie=0;function Ue(){return Ie>0}function Ne(){Ie+=1,setTimeout((function(){Ie-=1}))}function Pe(t,e,n){if(void 0===e&&(e={}),"function"!=typeof t)return t;try{if(t.__sentry__)return t;if(t.__sentry_wrapped__)return t.__sentry_wrapped__}catch(e){return t}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var i=r.map((function(t){return Pe(t,e)}));return t.handleEvent?t.handleEvent.apply(this,i):t.apply(this,i)}catch(t){throw Ne(),zt((function(n){n.addEventProcessor((function(t){var n=o({},t);return e.mechanism&&(L(n,void 0,void 0),A(n,e.mechanism)),n.extra=o({},n.extra,{arguments:r}),n})),Yt(t)})),t}};try{for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch(t){}t.prototype=t.prototype||{},r.prototype=t.prototype,Object.defineProperty(t,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:t}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return t.name}})}catch(t){}return r}var Ce=function(){function t(e){this.name=t.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=o({onerror:!0,onunhandledrejection:!0},e)}return t.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(Q.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(Q.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},t.prototype._installGlobalOnErrorHandler=function(){var e=this;this._onErrorHandlerInstalled||(gt({callback:function(n){var r=n.error,o=Ft(),i=o.getIntegration(t),s=r&&!0===r.__sentry_own_request__;if(i&&!Ue()&&!s){var a=o.getClient(),c=b(r)?e._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):e._enhanceEventWithInitialFrame(Ee(r,void 0,{attachStacktrace:a&&a.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);A(c,{handled:!1,type:"onerror"}),o.captureEvent(c,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},t.prototype._installGlobalOnUnhandledRejectionHandler=function(){var e=this;this._onUnhandledRejectionHandlerInstalled||(gt({callback:function(r){var o=r;try{"reason"in r?o=r.reason:"detail"in r&&"reason"in r.detail&&(o=r.detail.reason)}catch(t){}var i=Ft(),s=i.getIntegration(t),a=o&&!0===o.__sentry_own_request__;if(!s||Ue()||a)return!0;var c=i.getClient(),u=b(o)?e._eventFromIncompleteRejection(o):Ee(o,void 0,{attachStacktrace:c&&c.getOptions().attachStacktrace,rejection:!0});u.level=n.Error,A(u,{handled:!1,type:"onunhandledrejection"}),i.captureEvent(u,{originalException:o})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},t.prototype._eventFromIncompleteOnError=function(t,e,n,r){var o,i=y(t)?t.message:t;if(m(i)){var s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2])}return this._enhanceEventWithInitialFrame({exception:{values:[{type:o||"Error",value:i}]}},e,n,r)},t.prototype._eventFromIncompleteRejection=function(t){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+t}]}}},t.prototype._enhanceEventWithInitialFrame=function(t,e,n,r){t.exception=t.exception||{},t.exception.values=t.exception.values||[],t.exception.values[0]=t.exception.values[0]||{},t.exception.values[0].stacktrace=t.exception.values[0].stacktrace||{},t.exception.values[0].stacktrace.frames=t.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,i=isNaN(parseInt(n,10))?void 0:n,s=m(e)&&e.length>0?e:function(){try{return document.location.href}catch(t){return""}}();return 0===t.exception.values[0].stacktrace.frames.length&&t.exception.values[0].stacktrace.frames.push({colno:o,filename:s,function:"?",in_app:!0,lineno:i}),t},t.id="GlobalHandlers",t}(),De=function(){function t(){this._ignoreOnError=0,this.name=t.id}return t.prototype._wrapTimeFunction=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0];return e[0]=Pe(r,{mechanism:{data:{function:X(t)},handled:!0,type:"instrument"}}),t.apply(this,e)}},t.prototype._wrapRAF=function(t){return function(e){return t(Pe(e,{mechanism:{data:{function:"requestAnimationFrame",handler:X(t)},handled:!0,type:"instrument"}}))}},t.prototype._wrapEventTarget=function(t){var e=U(),n=e[t]&&e[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(tt(n,"addEventListener",(function(e){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Pe(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:X(r),target:t},handled:!0,type:"instrument"}}))}catch(t){}return e.call(this,n,Pe(r,{mechanism:{data:{function:"addEventListener",handler:X(r),target:t},handled:!0,type:"instrument"}}),o)}})),tt(n,"removeEventListener",(function(t){return function(e,n,r){var o=n;try{o=o&&(o.__sentry_wrapped__||o)}catch(t){}return t.call(this,e,o,r)}})))},t.prototype._wrapXHR=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(t){t in r&&"function"==typeof r[t]&&tt(r,t,(function(e){var n={mechanism:{data:{function:t,handler:X(e)},handled:!0,type:"instrument"}};return e.__sentry_original__&&(n.mechanism.data.handler=X(e.__sentry_original__)),Pe(e,n)}))})),t.apply(this,e)}},t.prototype.setupOnce=function(){this._ignoreOnError=this._ignoreOnError;var t=U();tt(t,"setTimeout",this._wrapTimeFunction.bind(this)),tt(t,"setInterval",this._wrapTimeFunction.bind(this)),tt(t,"requestAnimationFrame",this._wrapRAF.bind(this)),"XMLHttpRequest"in t&&tt(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"].forEach(this._wrapEventTarget.bind(this))},t.id="TryCatch",t}(),Le=function(){function t(e){this.name=t.id,this._options=o({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},e)}return t.prototype._consoleBreadcrumb=function(t){var e={category:"console",data:{arguments:t.args,logger:"console"},level:n.fromString(t.level),message:T(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;e.message="Assertion failed: "+(T(t.args.slice(1)," ")||"console.assert"),e.data.arguments=t.args.slice(1)}Ft().addBreadcrumb(e,{input:t.args,level:t.level})},t.prototype._domBreadcrumb=function(t){var e;try{e=F(t.event.target?t.event.target:t.event)}catch(t){e="<unknown>"}0!==e.length&&Ft().addBreadcrumb({category:"ui."+t.name,message:e},{event:t.event,name:t.name})},t.prototype._xhrBreadcrumb=function(t){if(t.endTimestamp){if(t.xhr.__sentry_own_request__)return;Ft().addBreadcrumb({category:"xhr",data:t.xhr.__sentry_xhr__,type:"http"},{xhr:t.xhr})}else this._options.sentry&&t.xhr.__sentry_own_request__&&Ae(t.args[0])},t.prototype._fetchBreadcrumb=function(t){if(t.endTimestamp){var e=Ft().getClient(),r=e&&e.getDsn();if(this._options.sentry&&r){var i=new Vt(r).getStoreEndpoint();if(i&&-1!==t.fetchData.url.indexOf(i)&&"POST"===t.fetchData.method&&t.args[1]&&t.args[1].body)return void Ae(t.args[1].body)}t.error?Ft().addBreadcrumb({category:"fetch",data:o({},t.fetchData,{status_code:t.response.status}),level:n.Error,type:"http"},{data:t.error,input:t.args}):Ft().addBreadcrumb({category:"fetch",data:o({},t.fetchData,{status_code:t.response.status}),type:"http"},{input:t.args,response:t.response})}},t.prototype._historyBreadcrumb=function(t){var e=U(),n=t.from,r=t.to,o=P(e.location.href),i=P(n),s=P(r);i.path||(i=o),o.protocol===s.protocol&&o.host===s.host&&(r=s.relative),o.protocol===i.protocol&&o.host===i.host&&(n=i.relative),Ft().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},t.prototype.setupOnce=function(){var t=this;this._options.console&&gt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._consoleBreadcrumb.apply(t,s(e))},type:"console"}),this._options.dom&&gt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._domBreadcrumb.apply(t,s(e))},type:"dom"}),this._options.xhr&&gt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._xhrBreadcrumb.apply(t,s(e))},type:"xhr"}),this._options.fetch&&gt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._fetchBreadcrumb.apply(t,s(e))},type:"fetch"}),this._options.history&&gt({callback:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t._historyBreadcrumb.apply(t,s(e))},type:"history"})},t.id="Breadcrumbs",t}();function Ae(t){try{var e=JSON.parse(t);Ft().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level||n.fromString("error"),message:C(e)},{event:e})}catch(t){Q.error("Error while adding sentry type breadcrumb")}}var Fe=function(){function t(e){void 0===e&&(e={}),this.name=t.id,this._key=e.key||"cause",this._limit=e.limit||5}return t.prototype.setupOnce=function(){Ct((function(e,n){var r=Ft().getIntegration(t);return r?r._handler(e,n):e}))},t.prototype._handler=function(t,e){if(!(t.exception&&t.exception.values&&e&&k(e.originalException,Error)))return t;var n=this._walkErrorTree(e.originalException,this._key);return t.exception.values=s(n,t.exception.values),t},t.prototype._walkErrorTree=function(t,e,n){if(void 0===n&&(n=[]),!k(t[e],Error)||n.length+1>=this._limit)return n;var r=ge(ve(t[e]));return this._walkErrorTree(t[e],e,s([r],n))},t.id="LinkedErrors",t}(),He=U(),Be=function(){function t(){this.name=t.id}return t.prototype.setupOnce=function(){Ct((function(e){if(Ft().getIntegration(t)){if(!He.navigator||!He.location)return e;var n=e.request||{};return n.url=n.url||He.location.href,n.headers=n.headers||{},n.headers["User-Agent"]=He.navigator.userAgent,o({},e,{request:n})}return e}))},t.id="UserAgent",t}(),Me=[new ce,new se,new De,new Le,new Ce,new Fe,new Be];function qe(t){if(void 0===t&&(t={}),void 0===t.defaultIntegrations&&(t.defaultIntegrations=Me),void 0===t.release){var e=U();e.SENTRY_RELEASE&&e.SENTRY_RELEASE.id&&(t.release=e.SENTRY_RELEASE.id)}!function(t,e){!0===e.debug&&Q.enable();var n=Ft(),r=new t(e);n.bindClient(r)}(Re,t)}function Ye(t,e){var n={};for(var r in t)n[r]=t[r];return n.target=n.currentTarget=e,n}var We,Ge=["load","loadend","timeout","error","readystatechange","abort"],Je=Ge[0],Xe=Ge[1],$e=Ge[2],ze=Ge[3],Ve=Ge[4],Ke=Ge[5];function Qe(t){return t.watcher||(t.watcher=document.createElement("a"))}function Ze(t,e){var n,r=t.getProxy(),o="on"+e+"_",i=Ye({type:e},r);r[o]&&r[o](i),"function"==typeof Event?n=new Event(e,{bubbles:!1}):(n=document.createEvent("Event")).initEvent(e,!1,!0),Qe(t).dispatchEvent(n)}function tn(t){this.xhr=t,this.xhrProxy=t.getProxy()}function en(t){function e(t){tn.call(this,t)}return(e.prototype=Object.create(tn.prototype)).next=t,e}tn.prototype=Object.create({resolve:function(t){var e=this.xhrProxy,n=this.xhr;e.readyState=4,n.resHeader=t.headers,e.response=e.responseText=t.response,e.statusText=t.statusText,e.status=t.status,Ze(n,Ve),Ze(n,Je),Ze(n,Xe)},reject:function(t){this.xhrProxy.status=0,Ze(this.xhr,t.type),Ze(this.xhr,Xe)}});var nn=en((function(t){var e=this.xhr;for(var n in e.withCredentials=(t=t||e.config).withCredentials,e.open(t.method,t.url,!1!==t.async,t.user,t.password),t.headers)e.setRequestHeader(n,t.headers[n]);e.send(t.body)})),rn=en((function(t){this.resolve(t)})),on=en((function(t){this.reject(t)}));function sn(t){var e=t.onRequest,n=t.onResponse,r=t.onError;function o(t,e,n){var o=new on(t),i={config:t.config,error:n};r?r(i,o):o.next(i)}function i(){return!0}function s(t,e){return o(t,0,e),!0}function a(t,e){return 4===t.readyState&&0!==t.status?function(t,e){var r=new rn(t);if(!n)return r.resolve();var o={response:e.response,status:e.status,statusText:e.statusText,config:t.config,headers:t.resHeader||t.getAllResponseHeaders().split("\r\n").reduce((function(t,e){if(""===e)return t;var n=e.split(":");return t[n.shift()]=function(t){return t.replace(/^\s+|\s+$/g,"")}(n.join(":")),t}),{})};n(o,r)}(t,e):4!==t.readyState&&Ze(t,Ve),!0}return function(t){function e(e){return function(){var n=this.hasOwnProperty(e+"_")?this[e+"_"]:this.xhr[e],r=(t[e]||{}).getter;return r&&r(n,this)||n}}function n(e){return function(n){var r=this.xhr,o=this,i=t[e];if("on"===e.substring(0,2))o[e+"_"]=n,r[e]=function(i){i=Ye(i,o),t[e]&&t[e].call(o,r,i)||n.call(o,i)};else{var s=(i||{}).setter;n=s&&s(n,o)||n,this[e+"_"]=n;try{r[e]=n}catch(t){}}}}function r(e){return function(){var n=[].slice.call(arguments);if(t[e]){var r=t[e].call(this,n,this.xhr);if(r)return r}return this.xhr[e].apply(this.xhr,n)}}return window._rxhr=window._rxhr||XMLHttpRequest,XMLHttpRequest=function(){var t=new window._rxhr;for(var o in t){var i="";try{i=typeof t[o]}catch(t){}"function"===i?this[o]=r(o):Object.defineProperty(this,o,{get:e(o),set:n(o),enumerable:!0})}var s=this;t.getProxy=function(){return s},this.xhr=t},window._rxhr}({onload:i,onloadend:i,onerror:s,ontimeout:s,onabort:s,onreadystatechange:function(t){return a(t,this)},open:function(t,n){var r=this,i=n.config={headers:{}};i.method=t[0],i.url=t[1],i.async=t[2],i.user=t[3],i.password=t[4],i.xhr=n;var s="on"+Ve;n[s]||(n[s]=function(){return a(n,r)});var c=function(t){o(n,0,Ye(t,r))};if([ze,$e,Ke].forEach((function(t){var e="on"+t;n[e]||(n[e]=c)})),e)return!0},send:function(t,n){var r=n.config;if(r.withCredentials=n.withCredentials,r.body=t[0],e){var o=function(){e(r,new nn(n))};return!1===r.async?o():setTimeout(o),!0}},setRequestHeader:function(t,e){return e.config.headers[t[0].toLowerCase()]=t[1],!0},addEventListener:function(t,e){var n=this;if(-1!==Ge.indexOf(t[0])){var r=t[1];return Qe(e).addEventListener(t[0],(function(e){var o=Ye(e,n);o.type=t[0],o.isTrusted=!0,r.call(n,o)})),!0}},getAllResponseHeaders:function(t,e){var n=e.resHeader;if(n){var r="";for(var o in n)r+=o+": "+n[o]+"\r\n";return r}},getResponseHeader:function(t,e){var n=e.resHeader;if(n)return n[(t[0]||"").toLowerCase()]}})}return class extends class{constructor(t){this._options=t,this._options.isAjax&&(this._ajax(),this._fetch()),this._options.isError&&this._error(),this._privacy()}_ajax(){!function(t){if(We)throw"Proxy already exists";We=new sn(t)}({onRequest:(t,e)=>{e.next(t)},onError:(t,e)=>{this._options.filterUrls.includes(t.config.url)||(console.error(t),console.log("API 错误被捕捉",t.config.url),this._reportFactory("error","API 错误被捕捉","Error",t)),e.reject(t)},onResponse:(t,e)=>{if(!this._options.filterUrls.includes(t.config.url)){this._checkRules(t)&&(console.log("API 不符合规则被捕捉",t.config.url),this._reportFactory("error","API 不符合规则被捕捉","Response",t))}e.next(t)}})}_fetch(){}_error(){window.addEventListener("error",(t=>{const e={t:(new Date).getTime(),msg:t.target.localName+" is load error",target:t.target.localName,type:t.type,resourceUrl:t.target.href||t.target.currentSrc};this._reportFactory("error","资源加载错误","Stack",e)}),!0),window.onerror=(t,e,n,r,o)=>{setTimeout((()=>{r=r||0;const i={t:(new Date).getTime(),msg:o&&o.stack?o.stack.toString():t,resourceUrl:e,line:n,col:r};this._reportFactory("error","脚本错误","Stack",i)}),0)},window.addEventListener("unhandledrejection",(t=>{const e=t&&t.reason,n=e.hasOwnProperty("message")?e.message:"";let r,o,i,s=(e.stack||"").match(/\(.+?\)/);s&&s.length&&(s=s[0],s=s.replace(/\w.+[js|html]/g,(t=>(r=t,""))),s=s.split(":")),s&&s.length>1&&(i=parseInt(s[1]||0,10)),s&&s.length>2&&(o=parseInt(s[2]||0,10));const a={t:(new Date).getTime(),msg:n,resourceUrl:r,line:o,col:i};this._reportFactory("error","异步未处理的错误","Stack",a)}));const t=console.error;console.error=e=>(setTimeout((()=>{const t={t:(new Date).getTime(),msg:e,resourceUrl:location.href};this._reportFactory("error","控制台错误提示","Stack",t)}),0),t.apply(console,arguments))}_privacy(){if(!this._options.usedCookies)return;const t=this._options.usedCookies.map((t=>{const e=new RegExp(`(^| )${t}=([^;]*)(;|$)`),n=document.cookie.match(e);return{[t]:n?n[2]:""}}));this._reportFactory("info","Cookies 记录","Cookies",t)}_checkRules(t){const e=this._options.apiRules.filter((e=>t.config.url.includes(e.url)));if(!e)return console.error("当前缺少匹配的规则"),!1;e.length>1&&console.error("API 规则定义重复, 将取最先定义项作为规则");const n=e[0].rules?e[0].rules:null;if(!n||!Array.isArray(n))return!1;if(t.status<200||t.status>=400)return!0;const r=new Map(n.map((t=>[t.name,t.permission]))),o=JSON.parse(t.response);return!!Object.keys(o).map((t=>{if(r.has(t)){const e=r.get(t);return!(!e||0!==e.length)||!!(e&&e.indexOf(o[t])>=0)}})).some((t=>!1===t))}_reportFactory(t,e="",n="",r={}){setTimeout((()=>{Jt(n,r),"error"===t?Yt(new Error(e)):Wt(e)}),this._options.timeOut)}}{constructor(t){const e={dsn:"",version:"1.0.0",env:"",appid:"",uin:0,name:"",isAjax:!0,isError:!0,isCookies:!0,timeOut:300,filterUrls:[],apiRules:[],usedCookies:[]};Object.assign(e,t),e.filterUrls=e.filterUrls.concat(["/sockjs-node/info","arms-retcode.aliyuncs.com","aliyuncs.com","ynuf.aliapp.org"]),e.apiRules=e.apiRules.concat([{url:"guangdianyun.tv",rules:[{name:"code",permission:[200]},{name:"data",permission:[]},{name:"errorCode",permission:[0]},{name:"errorMessage",permission:[]}]}]),e.usedCookies=e.usedCookies.concat(["CONSOLE_TOKEN_GDY"]),super(e),this.options=e,console.log(this.options);let n="";switch(this.options.env){case"TEST":n="development";break;case"PRE":n="preview";break;case"":default:n="production"}qe({dsn:this.options.dsn,release:this.options.version,environment:n}),$t({AppId:this.options.appid,Uin:this.options.uin,Name:this.options.name,Environment:n}),Xt("Uin",String(this.options.uin)),Xt("Appid",this.options.appid)}init(t){const e={dsn:"",version:"1.0.0",env:""};Object.assign(e,t);let n="";switch(e.env){case"TEST":n="development";break;case"PRE":n="preview";break;case"":default:n="production"}qe({dsn:String(e.dsn),release:e.version,environment:n})}setUser(t,e,n="",r=""){let o="";switch(r){case"TEST":o="development";break;case"PRE":o="preview";break;case"":default:o="production"}$t({AppId:t,Uin:e,Name:n,Environment:o})}api(t,e,n,r={}){Gt((function(n){n.setTag("appid",t),n.setTag("uin",String(e))})),Xt("Uin",String(e)),Xt("Appid",t),Jt("data",r),Yt(new Error("Api Error:"+n))}info(t,e,n="Info",r={}){Gt((function(n){n.setTag("appid",t),n.setTag("uin",String(e))})),Xt("Uin",String(e)),Xt("Appid",t),Jt("data",r),Wt(n)}error(t,e,n="New Error",r={}){Gt((function(n){n.setTag("appid",t),n.setTag("uin",String(e))})),Xt("Uin",String(e)),Xt("Appid",t),Jt("data",r),Yt(new Error(n))}}}();
